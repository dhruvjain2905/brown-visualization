<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>The Brown Community 2024</title>
 <script src="https://d3js.org/d3.v7.min.js"></script>
 <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
 <style>
   * {
     margin: 0;
     padding: 0;
     box-sizing: border-box;
   }


   body {
     font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
     background: #ffffff;
     overflow-x: hidden;
     color: #1a1a1a;
   }


   #main-container {
     position: relative;
     width: 100%;
     height: 500vh; /* Extended for scroll-based navigation */
   }


   #viz-container {
     position: sticky;
     top: 0;
     width: 100%;
     height: 100vh;
     overflow: hidden;
   }


   svg {
     width: 100%;
     height: 100%;
     display: block;
   }


   /* Title and subtitle overlay */
   #title-overlay {
     position: fixed;
     top: 20%;
     left: 50%;
     transform: translate(-50%, -50%);
     text-align: center;
     pointer-events: none;
     z-index: 10;
     transition: opacity 0.6s ease;
   }


   #title-overlay h1 {
     font-size: 48px;
     font-weight: 700;
     margin-bottom: 12px;
     color: #1a1a1a;
   }


   #title-overlay .subtitle {
     font-size: 24px;
     font-weight: 400;
     color: #666;
   }


   #title-overlay .scroll-prompt {
     font-size: 16px;
     color: #999;
     margin-top: 40px;
     animation: bounce 2s infinite;
   }


   @keyframes bounce {
     0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
     40% { transform: translateY(-10px); }
     60% { transform: translateY(-5px); }
   }


   /* Cluster labels */
   .cluster-label {
     font-family: 'Inter', sans-serif;
     font-size: 18px;
     font-weight: 600;
     fill: #1a1a1a;
     text-anchor: middle;
     pointer-events: none;
     opacity: 0;
     transition: opacity 0.6s;
   }


   .cluster-count {
     font-family: 'Inter', sans-serif;
     font-size: 14px;
     font-weight: 400;
     fill: #666;
     text-anchor: middle;
     pointer-events: none;
     opacity: 0;
     transition: opacity 0.6s;
   }


   /* Button container */
   #button-container,
   #faculty-button-container {
     position: fixed;
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%);
     display: flex;
     gap: 20px;
     opacity: 0;
     pointer-events: none;
     z-index: 20;
     transition: opacity 0.6s ease;
   }


   .action-button {
     padding: 16px 32px;
     font-size: 16px;
     font-weight: 600;
     color: white;
     background: #1a1a1a;
     border: none;
     border-radius: 8px;
     cursor: pointer;
     transition: all 0.3s ease;
     font-family: 'Inter', sans-serif;
   }


   .action-button:hover {
     background: #333;
     transform: translateY(-2px);
     box-shadow: 0 4px 12px rgba(0,0,0,0.2);
   }


   /* Back button */
   #back-button {
     position: fixed;
     top: 30px;
     left: 30px;
     padding: 12px 24px;
     font-size: 14px;
     font-weight: 600;
     color: #1a1a1a;
     background: white;
     border: 2px solid #1a1a1a;
     border-radius: 8px;
     cursor: pointer;
     opacity: 0;
     pointer-events: none;
     z-index: 30;
     transition: all 0.3s ease;
     font-family: 'Inter', sans-serif;
   }


   #back-button:hover {
     background: #f5f5f5;
   }


   #back-button.visible {
     opacity: 1;
     pointer-events: auto;
   }


   /* Slider container */
   #slider-container {
     position: fixed;
     bottom: 60px;
     left: 50%;
     transform: translateX(-50%);
     width: 80%;
     max-width: 600px;
     text-align: center;
     opacity: 0;
     pointer-events: none;
     z-index: 20;
     transition: opacity 0.6s ease;
   }


   #slider-container.visible {
     opacity: 1;
     pointer-events: auto;
   }


   #slider-label {
     font-size: 16px;
     font-weight: 600;
     color: #1a1a1a;
     margin-bottom: 16px;
   }


   input[type="range"] {
     width: 100%;
     height: 8px;
     appearance: none;
     border-radius: 4px;
     background: #e0e0e0;
     outline: none;
     cursor: pointer;
   }


   input[type="range"]::-webkit-slider-thumb {
     appearance: none;
     width: 24px;
     height: 24px;
     border-radius: 50%;
     background: #1a1a1a;
     cursor: pointer;
     transition: transform 0.2s ease;
   }


   input[type="range"]::-webkit-slider-thumb:hover {
     transform: scale(1.2);
   }


   input[type="range"]::-moz-range-thumb {
     width: 24px;
     height: 24px;
     border-radius: 50%;
     background: #1a1a1a;
     cursor: pointer;
     border: none;
   }


   /* Popup modal */
   #popup-modal {
     position: fixed;
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%) scale(0.9);
     width: 90%;
     max-width: 500px;
     background: white;
     border-radius: 16px;
     box-shadow: 0 20px 60px rgba(0,0,0,0.3);
     padding: 32px;
     opacity: 0;
     pointer-events: none;
     z-index: 50;
     transition: all 0.3s ease;
   }


   #popup-modal.visible {
     opacity: 1;
     pointer-events: auto;
     transform: translate(-50%, -50%) scale(1);
   }


   #popup-overlay {
     position: fixed;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
     background: rgba(0,0,0,0.5);
     opacity: 0;
     pointer-events: none;
     z-index: 40;
     transition: opacity 0.3s ease;
   }


   #popup-overlay.visible {
     opacity: 1;
     pointer-events: auto;
   }


   #popup-close {
     position: absolute;
     top: 16px;
     right: 16px;
     width: 32px;
     height: 32px;
     border: none;
     background: #f5f5f5;
     border-radius: 50%;
     cursor: pointer;
     font-size: 20px;
     color: #666;
     transition: all 0.2s ease;
   }


   #popup-close:hover {
     background: #e0e0e0;
     color: #1a1a1a;
   }


   #popup-content h2 {
     font-size: 28px;
     font-weight: 700;
     margin-bottom: 8px;
     color: #1a1a1a;
   }


   #popup-content .popup-subtitle {
     font-size: 14px;
     color: #999;
     margin-bottom: 24px;
   }


   .popup-stat {
     margin-bottom: 20px;
   }


   .popup-stat-label {
     font-size: 14px;
     color: #666;
     margin-bottom: 6px;
   }


   .popup-stat-value {
     font-size: 20px;
     font-weight: 600;
     color: #1a1a1a;
     margin-bottom: 8px;
   }


   .popup-bar {
     width: 100%;
     height: 12px;
     background: #f0f0f0;
     border-radius: 6px;
     overflow: hidden;
   }


   .popup-bar-fill {
     height: 100%;
     border-radius: 6px;
     transition: width 0.6s ease;
   }


   .popup-list {
     list-style: none;
     margin-top: 12px;
   }


   .popup-list li {
     font-size: 14px;
     color: #666;
     padding: 6px 0;
     border-bottom: 1px solid #f0f0f0;
   }


   .popup-list li:last-child {
     border-bottom: none;
   }


   /* Legend */
   #legend {
     position: fixed;
     top: 30px;
     right: 30px;
     background: white;
     padding: 16px;
     border-radius: 8px;
     box-shadow: 0 2px 8px rgba(0,0,0,0.1);
     opacity: 0;
     pointer-events: none;
     z-index: 30;
     transition: opacity 0.6s ease;
   }


   #legend.visible {
     opacity: 1;
   }


   .legend-item {
     display: flex;
     align-items: center;
     gap: 10px;
     margin-bottom: 8px;
     font-size: 14px;
   }


   .legend-item:last-child {
     margin-bottom: 0;
   }


   .legend-dot {
     width: 12px;
     height: 12px;
     border-radius: 50%;
   }


   /* Click instruction */
   #click-instruction {
     position: fixed;
     bottom: 40px;
     left: 50%;
     transform: translateX(-50%);
     font-size: 20px;
     color: #1a1a1a;
     opacity: 0;
     pointer-events: none;
     z-index: 20;
     transition: opacity 0.6s ease;
   }


   #click-instruction.visible {
     opacity: 1;
   }


   /* Disable all interactions during animations */
   body.interactions-locked * {
     pointer-events: none !important;
   }

   body.interactions-locked {
     pointer-events: auto !important;
   }
 </style>
</head>
<body>
 <div id="main-container">
   <div id="viz-container">
     <svg id="main-svg"></svg>
   </div>
 </div>


 <!-- Title overlay -->
 <div id="title-overlay">
   <h2>Each dot represents a member of the Brown community in 2024</h2>
   <div class="scroll-prompt">↓ Scroll to explore</div>
   <br>
   <br>
   <br>
   <br>
   <br>
 </div>


 <!-- Legend -->
 <div id="legend">
   <div class="legend-item">
     <div class="legend-dot" style="background: #4A90E2;"></div>
     <span id="legend-label-1">Students</span>
   </div>
   <div class="legend-item">
     <div class="legend-dot" style="background: #F5A623;"></div>
     <span id="legend-label-2">Faculty</span>
   </div>
   <div class="legend-item">
     <div class="legend-dot" style="background: #7ED321;"></div>
     <span id="legend-label-3">Staff</span>
   </div>
 </div>


 <!-- Back button -->
 <button id="back-button">← Back to Community</button>


 <!-- Button container for Students -->
 <div id="button-container">
   <button class="action-button" id="btn-concentration">View by Concentration</button>
   <button class="action-button" id="btn-gender">View by Gender</button>
 </div>

 <!-- Button container for Faculty -->
 <div id="faculty-button-container">
   <button class="action-button" id="btn-department">View by Department</button>
   <button class="action-button" id="btn-rank">View by Rank</button>
 </div>


 <!-- Slider -->
 <div id="slider-container">
   <div id="slider-label">Cluster by Concentration →</div>
   <input type="range" id="cluster-slider" min="0" max="1" step="0.01" value="0">
 </div>


 <!-- Click instruction -->
 <div id="click-instruction">Click any group to explore</div>


 <!-- Popup modal -->
 <div id="popup-overlay"></div>
 <div id="popup-modal">
   <button id="popup-close">×</button>
   <div id="popup-content"></div>
 </div>


 <script src="brown-community-data.js"></script>
 <script src="brown-community-viz.js"></script>
</body>
</html>

